!function(e){upfrontrjs.define([],function(){var t=function(e){return e.breakpoint&&e.breakpoint.tablet&&(e.tablet=[],_.each(e.breakpoint.tablet,function(t,r){e.tablet[r]=t})),e.breakpoint&&e.breakpoint.mobile&&(e.mobile=[],_.each(e.breakpoint.mobile,function(t,r){e.mobile[r]=t})),e},r=function(e,r,n){var o=Upfront.Util.template(r);return void 0!==e.preset_style&&(e.preset_style=e.preset_style.replace(/#page/g,"#page.upfront-layout-view .upfront-editable_entity.upfront-module"),"thispost"===n&&(e.preset_style=e.preset_style.replace(/.default/g,".default.upfront-this_post")),"ucomment"===n&&(e.preset_style=e.preset_style.replace(/.default/g,".default.upfront-comment")),e.preset_style=Upfront.Util.colors.convert_string_ufc_to_color(e.preset_style,!0)),o({properties:t(e)}).replace(/#page/g,"div#page.upfront-layout-view").replace(new RegExp(e.id+" .upfront-button","g"),e.id+".upfront-button").replace(/\\'/g,"'").replace(/\\'/g,"'").replace(/\\'/g,"'").replace(/\\"/g,'"').replace(/\\"/g,'"').replace(/\\"/g,'"')},n={generateCss:r,generatePresetsToPage:function(e,r){var o=Upfront.mainData[e+"Presets"],a=Upfront.mainData.presetDefaults[e];void 0!==o&&o||!a?_.each(o,function(o){n.updatePresetStyle(e,t(o),r)}):n.updatePresetStyle(e,a,r)},getPresetProperties:function(t,r){var n=Upfront.mainData[t+"Presets"]||[],o={};return e.each(n,function(e,t){if(!t||!t.id||r!==t.id)return!0;o=_.extend({},t)}),o},updatePresetStyle:function(t,n,o){var a=t+"-preset-"+n.id,p=_.extend({},n);_.each(p,function(e,t){Upfront.Util.colors.is_theme_color(e)&&(p[t]=e)}),0===e("style#"+a).length&&e("body").append('<style class="preset-style" id="'+a+'"></style>'),e("style#"+a).text(Upfront.Util.colors.convert_string_ufc_to_color(r(p,o,t),!0))}};return n})}(jQuery);